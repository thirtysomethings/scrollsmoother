!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})}(this,(function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){return"undefined"!=typeof window}function n(){return s||r()&&(s=window.gsap)&&s.registerPlugin&&s}function o(){return String.fromCharCode.apply(null,arguments)}function i(e){return h.maxScroll(e||c)}var s,a,c,l,f,u,d,p,h,g,m,v,y,w,b,S="ScrollSmoother",x=o(103,114,101,101,110,115,111,99,107,46,99,111,109),k=o(103,115,97,112,46,99,111,109),T=/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}:?\d*$/,_=(function(e){var t="undefined"!=typeof window,r=0===(t?window.location.href:"").indexOf("file://")||-1!==e.indexOf("localhost")||T.test(e)||"local"===(t?window.location.hostname:"").split(".").pop(),n=[x,k,"codepen.io","codepen.plumbing","codepen.dev","codepen.app","codepen.website","pens.cloud","css-tricks.com","cdpn.io","pens.io","gannon.tv","codecanyon.net","themeforest.net","cerebrax.co.uk","tympanus.net","tweenmax.com","plnkr.co","hotjar.com","webpackbin.com","archive.org","codesandbox.io","csb.app","stackblitz.com","stackblitz.io","codier.io","motiontricks.com","stackoverflow.com","stackexchange.com","studiofreight.com","webcontainer.io","jsfiddle.net",window.location.hostname],o=n.length;for(setTimeout((function e(){if(t)if("loading"===document.readyState||"interactive"===document.readyState)document.addEventListener("readystatechange",e);else{var r="object"==typeof s?s:t&&window.gsap;r.config().crackLog||console.log("%c["+S+"] Started / https://github.com/thirtysomethings/scrollsmoother","font-size:14px;color:pink;"),document.removeEventListener("readystatechange",e),t&&window.console&&!window._gsapWarned&&"object"==typeof r&&!1!==r.config().crackLog&&(console.log("%c["+S+"] Success","font-size:14px;color:pink;"),console.log("%c["+S+"] Remove this with ({crackLog: false})","font-size:8px;color:pink;"),window._gsapWarned=1)}}),50);-1<--o;)if(-1!==e.indexOf(n[o]))return;r||setTimeout((function(){console.log("%c["+S+"] Unsucessful (i think)","font-size:14px;color:pink;")}),4e3)}("undefined"!=typeof window?window.location.host:""),C.register=function(e){return a||(s=e||n(),r()&&window.document&&(c=window,l=document,f=l.documentElement,u=l.body),s&&(d=s.utils.toArray,p=s.utils.clamp,m=s.parseEase("expo"),w=s.core.context||function(){},h=s.core.globals().ScrollTrigger,s.core.globals("ScrollSmoother",C),u&&h&&(b=s.delayedCall(.2,(function(){return h.isRefreshing||g&&g.refresh()})).pause(),v=h.core._getVelocityProp,y=h.core._inputObserver,C.refresh=h.refresh,a=1))),a},function(e,r,n){r&&t(e.prototype,r),n&&t(e,n)}(C,[{key:"progress",get:function(){return this.scrollTrigger?this.scrollTrigger.animation._time/100:0}}]),C);function C(e){var t=this;function r(){return fe.update(-ae)}function n(){return M.style.overflow="visible"}function o(e){e.update();var t=e.getTween();t&&(t.pause(),t._time=t._dur,t._tTime=t._tDur),K=!1,e.animation.progress(e.progress,!0)}function S(e,t){(e!==ae&&!q||t)&&(te&&(e=Math.round(e)),ie&&(M.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+e+", 0, 1)",M._gsap.y=e+"px"),ce=e-ae,ae=e,h.isUpdating||C.isRefreshing||h.update())}function x(e){return arguments.length?(e<0&&(e=0),ue.y=-e,K=!0,q?ae=-e:S(-e),h.isRefreshing?F.update():oe(e/se),this):-ae}function k(e){N.scrollTop=0,e.target.contains&&e.target.contains(N)||Z&&!1===Z(t,e)||(h.isInViewport(e.target)||e.target===$||t.scrollTo(e.target,!1,"center center"),$=e.target)}function T(e,t){if(e<t.start)return e;var r=isNaN(t.ratio)?1:t.ratio,n=t.end-t.start,o=e-t.start,s=t.offset||0,a=t.pins||[],c=a.offset||0,l=t._startClamp&&t.start<=0||t.pins&&t.pins.offset?0:t._endClamp&&t.end===i()?1:.5;return a.forEach((function(t){n-=t.distance,t.nativeStart<=e&&(o-=t.distance)})),c&&(o*=(n-c/r)/n),e+(o-s*l)/r-o}function _(e,t){B.forEach((function(r){return function e(t,r,n){n||(t.pins.length=t.pins.offset=0);var o,i,a,c,l,f,u,d,p=t.pins,h=t.markers;for(u=0;u<r.length;u++)if(d=r[u],t.trigger&&d.trigger&&t!==d&&(d.trigger===t.trigger||d.pinnedContainer===t.trigger||t.trigger.contains(d.trigger))&&(l=d._startNative||d._startClamp||d.start,f=d._endNative||d._endClamp||d.end,a=T(l,t),c=d.pin&&0<f?a+(f-l):T(f,t),d.setPositions(a,c,!0,(d._startClamp?Math.max(0,a):a)-l),d.markerStart&&h.push(s.quickSetter([d.markerStart,d.markerEnd],"y","px")),d.pin&&0<d.end&&!n)){if(o=d.end-d.start,i=t._startClamp&&d.start<0){if(0<t.start)return t.setPositions(0,t.end+(t._startNative-t.start),!0),void e(t,r);o+=d.start,p.offset=-d.start}p.push({start:d.start,nativeStart:l,end:d.end,distance:o,trig:d}),t.setPositions(t.start,t.end+(i?-d.start:o),!0)}}(r,e,t)}))}function E(){n(),requestAnimationFrame(n),B&&(h.getAll().forEach((function(e){e._startNative=e.start,e._endNative=e.end})),B.forEach((function(e){var t=e._startClamp||e.start,r=e.autoSpeed?Math.min(i(),e.end):t+Math.abs((e.end-t)/e.ratio),n=r-e.end;if((r-=n/2)<(t-=n/2)){var o=t;t=r,r=o}e._startClamp&&t<0?(n=(r=e.ratio<0?i():e.end/e.ratio)-e.end,t=0):(e.ratio<0||e._endClamp&&r>=i())&&(n=((r=i())-(t=e.ratio<0||1<e.ratio?0:r-(r-e.start)/e.ratio))*e.ratio-(e.end-e.start)),e.offset=n||1e-4,e.pins.length=e.pins.offset=0,e.setPositions(t,r,!0)})),_(h.sort())),fe.reset()}function P(){return h.addEventListener("refresh",E)}function R(){return B&&B.forEach((function(e){return e.vars.onRefresh(e)}))}function z(){return B&&B.forEach((function(e){return e.vars.onRefreshInit(e)})),R}function A(e,t,r,n){return function(){var o="function"==typeof t?t(r,n):t;o||0===o||(o=n.getAttribute("data-"+ne+e)||("speed"===e?1:0)),n.setAttribute("data-"+ne+e,o);var i="clamp("===(o+"").substr(0,6);return{clamp:i,value:i?o.substr(6,o.length-7):o}}}function L(e,t,r,n,o){function a(){t=S(),r=parseFloat(x().value),d=parseFloat(t.value)||1,v="auto"===t.value,w=v||g&&g._startClamp&&g.start<=0||_.offset?0:g&&g._endClamp&&g.end===i()?1:.5,y&&y.kill(),y=r&&s.to(e,{ease:m,overwrite:!1,y:"+=0",duration:r}),g&&(g.ratio=d,g.autoSpeed=v)}function l(){T.y=k+"px",T.renderTransform(1),a()}function u(t){if(v){l();var r=function(e,t){var r,n,o=e.parentNode||f,i=e.getBoundingClientRect(),s=o.getBoundingClientRect(),a=s.top-i.top,l=s.bottom-i.bottom,u=(Math.abs(a)>Math.abs(l)?a:l)/(1-t),d=-u*t;return 0<u&&(n=.5==(r=s.height/(c.innerHeight+s.height))?2*s.height:2*Math.min(s.height,Math.abs(-u*r/(2*r-1)))*(t||1),d+=t?-n*t:-n/2,u+=n),{change:u,offset:d}}(e,p(0,1,-t.start/(t.end-t.start)));E=r.change,b=r.offset}else b=_.offset||0,E=(t.end-t.start-b)*(1-d);_.forEach((function(e){return E-=e.distance*(1-d)})),t.offset=E||.001,t.vars.onUpdate(t),y&&y.progress(1)}o=("function"==typeof o?o(n,e):o)||0;var d,g,v,y,w,b,S=A("speed",t,n,e),x=A("lag",r,n,e),k=s.getProperty(e,"y"),T=e._gsap,_=[],C=[],E=0;return a(),(1!==d||v||y)&&(u(g=h.create({trigger:v?e.parentNode:e,start:function(){return t.clamp?"clamp(top bottom+="+o+")":"top bottom+="+o},end:function(){return t.value<0?"max":t.clamp?"clamp(bottom top-="+o+")":"bottom top-="+o},scroller:N,scrub:!0,refreshPriority:-999,onRefreshInit:l,onRefresh:u,onKill:function(e){var t=B.indexOf(e);0<=t&&B.splice(t,1),l()},onUpdate:function(e){var t,r,n,o=k+E*(e.progress-w),i=_.length,a=0;if(e.offset){if(i){for(r=-ae,n=e.end;i--;){if((t=_[i]).trig.isActive||r>=t.start&&r<=t.end)return void(y&&(t.trig.progress+=t.trig.direction<0?.001:-.001,t.trig.update(0,0,1),y.resetTo("y",parseFloat(T.y),-ce,!0),le&&y.progress(1)));r>t.end&&(a+=t.distance),n-=t.distance}o=k+a+E*((s.utils.clamp(e.start,e.end,r)-e.start-a)/(n-e.start)-w)}C.length&&!v&&C.forEach((function(e){return e(o-a)})),o=function(e){return Math.round(1e5*e)/1e5||0}(o+b),y?(y.resetTo("y",o,-ce,!0),le&&y.progress(1)):(T.y=o+"px",T.renderTransform(1))}}})),s.core.getCache(g.trigger).stRevert=z,g.startY=k,g.pins=_,g.markers=C,g.ratio=d,g.autoSpeed=v,e.style.willChange="transform"),g}a||C.register(s)||console.warn("Please gsap.registerPlugin(ScrollSmoother)"),e=this.vars=e||{},g&&g.kill(),w(g=this);var M,N,O,F,B,H,j,I,U,q,V,D,W,Y,K,$,G=e.smoothTouch,J=e.onUpdate,Q=e.onStop,X=e.smooth,Z=e.onFocusIn,ee=e.normalizeScroll,te=e.wholePixels,re=this,ne=e.effectsPrefix||"",oe=h.getScrollFunc(c),ie=1===h.isTouch?!0===G?.8:parseFloat(G)||0:0===X||!1===X?0:parseFloat(X)||.8,se=ie&&+e.speed||1,ae=0,ce=0,le=1,fe=v(0),ue={y:0},de="undefined"!=typeof ResizeObserver&&!1!==e.autoResize&&new ResizeObserver((function(){if(!h.isRefreshing){var e=i(N)*se;e<-ae&&x(e),b.restart(!0)}}));function pe(){return O=M.clientHeight,M.style.overflow="visible",u.style.height=c.innerHeight+(O-c.innerHeight)/se+"px",O-c.innerHeight}P(),h.addEventListener("killAll",P),s.delayedCall(.5,(function(){return le=0})),this.scrollTop=x,this.scrollTo=function(e,r,n){var o=s.utils.clamp(0,i(),isNaN(e)?t.offset(e,n,!!r&&!q):+e);r?q?s.to(t,{duration:ie,scrollTop:o,overwrite:"auto",ease:m}):oe(o):x(o)},this.offset=function(e,t,r){var n,o=(e=d(e)[0]).style.cssText,i=h.create({trigger:e,start:t||"top top"});return B&&(le?h.refresh():_([i],!0)),n=i.start/(r?se:1),i.kill(!1),e.style.cssText=o,s.core.getCache(e).uncache=1,n},this.content=function(e){if(arguments.length){var t=d(e||"#smooth-content")[0]||console.warn("ScrollSmoother needs a valid content element.")||u.children[0];return t!==M&&(U=(M=t).getAttribute("style")||"",de&&de.observe(M),s.set(M,{overflow:"visible",width:"100%",boxSizing:"border-box",y:"+=0"}),ie||s.set(M,{clearProps:"transform"})),this}return M},this.wrapper=function(e){return arguments.length?(N=d(e||"#smooth-wrapper")[0]||function(e){var t=l.querySelector(".ScrollSmoother-wrapper");return t||((t=l.createElement("div")).classList.add("ScrollSmoother-wrapper"),e.parentNode.insertBefore(t,e),t.appendChild(e)),t}(M),I=N.getAttribute("style")||"",pe(),s.set(N,ie?{overflow:"hidden",position:"fixed",height:"100%",width:"100%",top:0,left:0,right:0,bottom:0}:{overflow:"visible",position:"relative",width:"100%",height:"auto",top:"auto",bottom:"auto",left:"auto",right:"auto"}),this):N},this.effects=function(e,t){if(B=B||[],!e)return B.slice(0);(e=d(e)).forEach((function(e){for(var t=B.length;t--;)B[t].trigger===e&&B[t].kill()}));var r,n,o=(t=t||{}).speed,i=t.lag,s=t.effectsPadding,a=[];for(r=0;r<e.length;r++)(n=L(e[r],o,i,r,s))&&a.push(n);return B.push.apply(B,a),!1!==t.refresh&&h.refresh(),a},this.sections=function(e,t){if(H=H||[],!e)return H.slice(0);var r=d(e).map((function(e){return h.create({trigger:e,start:"top 120%",end:"bottom -20%",onToggle:function(t){e.style.opacity=t.isActive?"1":"0",e.style.pointerEvents=t.isActive?"all":"none"}})}));return t&&t.add?H.push.apply(H,r):H=r.slice(0),r},this.content(e.content),this.wrapper(e.wrapper),this.render=function(e){return S(e||0===e?e:ae)},this.getVelocity=function(){return fe.getVelocity(-ae)},h.scrollerProxy(N,{scrollTop:x,scrollHeight:function(){return pe()&&u.scrollHeight},fixedMarkers:!1!==e.fixedMarkers&&!!ie,content:M,getBoundingClientRect:function(){return{top:0,left:0,width:c.innerWidth,height:c.innerHeight}}}),h.defaults({scroller:N});var he=h.getAll().filter((function(e){return e.scroller===c||e.scroller===N}));he.forEach((function(e){return e.revert(!0,!0)})),F=h.create({animation:s.fromTo(ue,{y:function(){return Y=0}},{y:function(){return Y=1,-pe()},immediateRender:!1,ease:"none",data:"ScrollSmoother",duration:100,onUpdate:function(){if(Y){var e=K;e&&(o(F),ue.y=ae),S(ue.y,e),r(),J&&!q&&J(re)}}}),onRefreshInit:function(e){if(!C.isRefreshing){if(C.isRefreshing=!0,B){var t=h.getAll().filter((function(e){return!!e.pin}));B.forEach((function(e){e.vars.pinnedContainer||t.forEach((function(t){if(t.pin.contains(e.trigger)){var r=e.vars;r.pinnedContainer=t.pin,e.vars=null,e.init(r,e.animation)}}))}))}var r=e.getTween();W=r&&r._end>r._dp._time,D=ae,ue.y=0,ie&&(1===h.isTouch&&(N.style.position="absolute"),N.scrollTop=0,1===h.isTouch&&(N.style.position="fixed"))}},onRefresh:function(e){e.animation.invalidate(),e.setPositions(e.start,pe()/se),W||o(e),ue.y=-oe()*se,S(ue.y),le||(W&&(K=!1),e.animation.progress(s.utils.clamp(0,1,D/se/-e.end))),W&&(e.progress-=.001,e.update()),C.isRefreshing=!1},id:"ScrollSmoother",scroller:c,invalidateOnRefresh:!0,start:0,refreshPriority:-9999,end:function(){return pe()/se},onScrubComplete:function(){fe.reset(),Q&&Q(t)},scrub:ie||!0}),this.smooth=function(t){return arguments.length&&(se=(ie=t||0)&&+e.speed||1,F.scrubDuration(t)),F.getTween()?F.getTween().duration():0},F.getTween()&&(F.getTween().vars.ease=e.ease||m),this.scrollTrigger=F,e.effects&&this.effects(!0===e.effects?"[data-"+ne+"speed], [data-"+ne+"lag]":e.effects,{effectsPadding:e.effectsPadding,refresh:!1}),e.sections&&this.sections(!0===e.sections?"[data-section]":e.sections),he.forEach((function(e){e.vars.scroller=N,e.revert(!1,!0),e.init(e.vars,e.animation)})),this.paused=function(e,t){return arguments.length?(!!q!==e&&(e?(F.getTween()&&F.getTween().pause(),oe(-ae/se),fe.reset(),(V=h.normalizeScroll())&&V.disable(),(q=h.observe({preventDefault:!0,type:"wheel,touch,scroll",debounce:!1,allowClicks:!0,onChangeY:function(){return x(-ae)}})).nested=y(f,"wheel,touch,scroll",!0,!1!==t)):(q.nested.kill(),q.kill(),q=0,V&&V.enable(),F.progress=(-ae/se-F.start)/(F.end-F.start),o(F))),this):!!q},this.kill=this.revert=function(){t.paused(!1),o(F),F.kill();for(var e=(B||[]).concat(H||[]),r=e.length;r--;)e[r].kill();h.scrollerProxy(N),h.removeEventListener("killAll",P),h.removeEventListener("refresh",E),N.style.cssText=I,M.style.cssText=U;var n=h.defaults({});n&&n.scroller===N&&h.defaults({scroller:c}),t.normalizer&&h.normalizeScroll(!1),clearInterval(j),g=null,de&&de.disconnect(),u.style.removeProperty("height"),c.removeEventListener("focusin",k)},this.refresh=function(e,t){return F.refresh(e,t)},ee&&(this.normalizer=h.normalizeScroll(!0===ee?{debounce:!0,content:!ie&&M}:ee)),h.config(e),"overscrollBehavior"in c.getComputedStyle(u)&&s.set([u,f],{overscrollBehavior:"none"}),"scrollBehavior"in c.getComputedStyle(u)&&s.set([u,f],{scrollBehavior:"auto"}),c.addEventListener("focusin",k),j=setInterval(r,250),"loading"===l.readyState||requestAnimationFrame((function(){return h.refresh()}))}_.version="3.12.5",_.create=function(e){return g&&e&&g.content()===d(e.content)[0]?g:new _(e)},_.get=function(){return g},n()&&s.registerPlugin(_),e.ScrollSmoother=_,e.default=_,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default}));
