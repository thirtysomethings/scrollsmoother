!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})}(this,function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){return"undefined"!=typeof window}function n(){return l||r()&&(l=window.gsap)&&l.registerPlugin&&l}function o(){return String.fromCharCode.apply(null,arguments)}function i(e){return m.maxScroll(e||u)}var s,a,c,l,f,u,d,p,h,g,$,m,v,_,y,b,w,S,k="ScrollSmoother",x=o(103,114,101,101,110,115,111,99,107,46,99,111,109),T=o(103,115,97,112,46,99,111,109),C=/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}:?\d*$/,E=(function(e){var t="undefined"!=typeof window,r=0===(t?window.location.href:"").indexOf("file://")||-1!==e.indexOf("localhost")||C.test(e)||"local"===(t?window.location.hostname:"").split(".").pop(),n=[x,T,"codepen.io","codepen.plumbing","codepen.dev","codepen.app","codepen.website","pens.cloud","css-tricks.com","cdpn.io","pens.io","gannon.tv","codecanyon.net","themeforest.net","cerebrax.co.uk","tympanus.net","tweenmax.com","plnkr.co","hotjar.com","webpackbin.com","archive.org","codesandbox.io","csb.app","stackblitz.com","stackblitz.io","codier.io","motiontricks.com","stackoverflow.com","stackexchange.com","studiofreight.com","webcontainer.io","jsfiddle.net",window.location.hostname],o=n.length;for(setTimeout(function e(){if(t){if("loading"===document.readyState||"interactive"===document.readyState)document.addEventListener("readystatechange",e);else{var r="object"==typeof l?l:t&&window.gsap;document.removeEventListener("readystatechange",e),t&&window.console&&!window._gsapWarned&&"object"==typeof r&&!1!==r.config().crackLog&&(console.log("%c["+k+"] Started / https://github.com/thirtysomethings/scrollsmoother","font-size:14px;color:pink;"),console.log("%c["+k+"] Success","font-size:14px;color:pink;"),console.log("%c["+k+"] Remove this with ({crackLog: false})","font-size:8px;color:pink;"),window._gsapWarned=1)}}},50);-1<--o;)if(-1!==e.indexOf(n[o]))return;r||setTimeout(function(){console.log("%c["+k+"] Unsucessful (i think)","font-size:14px;color:pink;")},4e3)}("undefined"!=typeof window?window.location.host:""),P.register=function e(t){return f||(l=t||n(),r()&&window.document&&(u=window,p=(d=document).documentElement,h=d.body),l&&(g=l.utils.toArray,$=l.utils.clamp,_=l.parseEase("expo"),w=l.core.context||function(){},m=l.core.globals().ScrollTrigger,l.core.globals("ScrollSmoother",P),h&&m&&(S=l.delayedCall(.2,function(){return m.isRefreshing||v&&v.refresh()}).pause(),y=m.core._getVelocityProp,b=m.core._inputObserver,P.refresh=m.refresh,f=1))),f},s=P,a=[{key:"progress",get:function e(){return this.scrollTrigger?this.scrollTrigger.animation._time/100:0}}],t(s.prototype,a),c&&t(s,c),P);function P(e){var t=this;function r(){return ef.update(-ea)}function n(){return L.style.overflow="visible"}function o(e){e.update();var t=e.getTween();t&&(t.pause(),t._time=t._dur,t._tTime=t._tDur),Y=!1,e.animation.progress(e.progress,!0)}function s(e,t){(e!==ea&&!D||t)&&(et&&(e=Math.round(e)),ei&&(L.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+e+", 0, 1)",L._gsap.y=e+"px"),ec=e-ea,ea=e,m.isUpdating||P.isRefreshing||m.update())}function a(e){return arguments.length?(e<0&&(e=0),eu.y=-e,Y=!0,D?ea=-e:s(-e),m.isRefreshing?N.update():eo(e/es),this):-ea}function c(e){B.scrollTop=0,e.target.contains&&e.target.contains(B)||Z&&!1===Z(t,e)||(m.isInViewport(e.target)||e.target===K||t.scrollTo(e.target,!1,"center center"),K=e.target)}function k(e,t){if(e<t.start)return e;var r=isNaN(t.ratio)?1:t.ratio,n=t.end-t.start,o=e-t.start,s=t.offset||0,a=t.pins||[],c=a.offset||0,l=t._startClamp&&t.start<=0||t.pins&&t.pins.offset?0:t._endClamp&&t.end===i()?1:.5;return a.forEach(function(t){n-=t.distance,t.nativeStart<=e&&(o-=t.distance)}),c&&(o*=(n-c/r)/n),e+(o-s*l)/r-o}function x(e,t){O.forEach(function(r){return function e(t,r,n){n||(t.pins.length=t.pins.offset=0);var o,i,s,a,c,f,u,d,p=t.pins,h=t.markers;for(u=0;u<r.length;u++)if(d=r[u],t.trigger&&d.trigger&&t!==d&&(d.trigger===t.trigger||d.pinnedContainer===t.trigger||t.trigger.contains(d.trigger))&&(c=d._startNative||d._startClamp||d.start,f=d._endNative||d._endClamp||d.end,s=k(c,t),a=d.pin&&0<f?s+(f-c):k(f,t),d.setPositions(s,a,!0,(d._startClamp?Math.max(0,s):s)-c),d.markerStart&&h.push(l.quickSetter([d.markerStart,d.markerEnd],"y","px")),d.pin&&0<d.end&&!n)){if(o=d.end-d.start,i=t._startClamp&&d.start<0){if(0<t.start)return t.setPositions(0,t.end+(t._startNative-t.start),!0),void e(t,r);o+=d.start,p.offset=-d.start}p.push({start:d.start,nativeStart:c,end:d.end,distance:o,trig:d}),t.setPositions(t.start,t.end+(i?-d.start:o),!0)}}(r,e,t)})}function T(){n(),requestAnimationFrame(n),O&&(m.getAll().forEach(function(e){e._startNative=e.start,e._endNative=e.end}),O.forEach(function(e){var t=e._startClamp||e.start,r=e.autoSpeed?Math.min(i(),e.end):t+Math.abs((e.end-t)/e.ratio),n=r-e.end;if((r-=n/2)<(t-=n/2)){var o=t;t=r,r=o}e._startClamp&&t<0?(n=(r=e.ratio<0?i():e.end/e.ratio)-e.end,t=0):(e.ratio<0||e._endClamp&&r>=i())&&(n=((r=i())-(t=e.ratio<0||1<e.ratio?0:r-(r-e.start)/e.ratio))*e.ratio-(e.end-e.start)),e.offset=n||1e-4,e.pins.length=e.pins.offset=0,e.setPositions(t,r,!0)}),x(m.sort())),ef.reset()}function C(){return m.addEventListener("refresh",T)}function E(){return O&&O.forEach(function(e){return e.vars.onRefresh(e)})}function R(){return O&&O.forEach(function(e){return e.vars.onRefreshInit(e)}),E}function z(e,t,r,n){return function(){var o="function"==typeof t?t(r,n):t;o||0===o||(o=n.getAttribute("data-"+en+e)||("speed"===e?1:0)),n.setAttribute("data-"+en+e,o);var i="clamp("===(o+"").substr(0,6);return{clamp:i,value:i?o.substr(6,o.length-7):o}}}function A(e,t,r,n,o){function s(){t=b(),r=parseFloat(w().value),f=parseFloat(t.value)||1,v=(h="auto"===t.value)||d&&d._startClamp&&d.start<=0||x.offset?0:d&&d._endClamp&&d.end===i()?1:.5,g&&g.kill(),g=r&&l.to(e,{ease:_,overwrite:!1,y:"+=0",duration:r}),d&&(d.ratio=f,d.autoSpeed=h)}function a(){k.y=S+"px",k.renderTransform(1),s()}function c(t){if(h){a();var r,n,o,i,s,c,l,d,m,v,_,b=(r=e,n=$(0,1,-t.start/(t.end-t.start)),s=r.parentNode||p,c=r.getBoundingClientRect(),d=(l=s.getBoundingClientRect()).top-c.top,_=-(v=(Math.abs(d)>Math.abs(m=l.bottom-c.bottom)?d:m)/(1-n))*n,0<v&&(i=.5==(o=l.height/(u.innerHeight+l.height))?2*l.height:2*Math.min(l.height,Math.abs(-v*o/(2*o-1)))*(n||1),_+=n?-i*n:-i/2,v+=i),{change:v,offset:_});C=b.change,y=b.offset}else y=x.offset||0,C=(t.end-t.start-y)*(1-f);x.forEach(function(e){return C-=e.distance*(1-f)}),t.offset=C||.001,t.vars.onUpdate(t),g&&g.progress(1)}o=("function"==typeof o?o(n,e):o)||0;var f,d,h,g,v,y,b=z("speed",t,n,e),w=z("lag",r,n,e),S=l.getProperty(e,"y"),k=e._gsap,x=[],T=[],C=0;return s(),(1!==f||h||g)&&(c(d=m.create({trigger:h?e.parentNode:e,start:function e(){return t.clamp?"clamp(top bottom+="+o+")":"top bottom+="+o},end:function e(){return t.value<0?"max":t.clamp?"clamp(bottom top-="+o+")":"bottom top-="+o},scroller:B,scrub:!0,refreshPriority:-999,onRefreshInit:a,onRefresh:c,onKill:function e(t){var r=O.indexOf(t);0<=r&&O.splice(r,1),a()},onUpdate:function e(t){var r,n,o,i,s=S+C*(t.progress-v),a=x.length,c=0;if(t.offset){if(a){for(o=-ea,i=t.end;a--;){if((n=x[a]).trig.isActive||o>=n.start&&o<=n.end)return void(g&&(n.trig.progress+=n.trig.direction<0?.001:-.001,n.trig.update(0,0,1),g.resetTo("y",parseFloat(k.y),-ec,!0),el&&g.progress(1)));o>n.end&&(c+=n.distance),i-=n.distance}s=S+c+C*((l.utils.clamp(t.start,t.end,o)-t.start-c)/(i-t.start)-v)}T.length&&!h&&T.forEach(function(e){return e(s-c)}),s=Math.round(1e5*(r=s+y))/1e5||0,g?(g.resetTo("y",s,-ec,!0),el&&g.progress(1)):(k.y=s+"px",k.renderTransform(1))}}})),l.core.getCache(d.trigger).stRevert=R,d.startY=S,d.pins=x,d.markers=T,d.ratio=f,d.autoSpeed=h,e.style.willChange="transform"),d}f||P.register(l)||console.warn("Please gsap.registerPlugin(ScrollSmoother)"),e=this.vars=e||{},v&&v.kill(),w(v=this);var L,B,H,N,O,U,j,I,V,D,M,W,q,F,Y,K,G=e.smoothTouch,J=e.onUpdate,Q=e.onStop,X=e.smooth,Z=e.onFocusIn,ee=e.normalizeScroll,et=e.wholePixels,er=this,en=e.effectsPrefix||"",eo=m.getScrollFunc(u),ei=1===m.isTouch?!0===G?.8:parseFloat(G)||0:0===X||!1===X?0:parseFloat(X)||.8,es=ei&&+e.speed||1,ea=0,ec=0,el=1,ef=y(0),eu={y:0},ed="undefined"!=typeof ResizeObserver&&!1!==e.autoResize&&new ResizeObserver(function(){if(!m.isRefreshing){var e=i(B)*es;e<-ea&&a(e),S.restart(!0)}});function ep(){return H=L.clientHeight,L.style.overflow="visible",h.style.height=u.innerHeight+(H-u.innerHeight)/es+"px",H-u.innerHeight}C(),m.addEventListener("killAll",C),l.delayedCall(.5,function(){return el=0}),this.scrollTop=a,this.scrollTo=function(e,r,n){var o=l.utils.clamp(0,i(),isNaN(e)?t.offset(e,n,!!r&&!D):+e);r?D?l.to(t,{duration:ei,scrollTop:o,overwrite:"auto",ease:_}):eo(o):a(o)},this.offset=function(e,t,r){var n,o=(e=g(e)[0]).style.cssText,i=m.create({trigger:e,start:t||"top top"});return O&&(el?m.refresh():x([i],!0)),n=i.start/(r?es:1),i.kill(!1),e.style.cssText=o,l.core.getCache(e).uncache=1,n},this.content=function(e){if(arguments.length){var t=g(e||"#smooth-content")[0]||console.warn("ScrollSmoother needs a valid content element.")||h.children[0];return t!==L&&(V=(L=t).getAttribute("style")||"",ed&&ed.observe(L),l.set(L,{overflow:"visible",width:"100%",boxSizing:"border-box",y:"+=0"}),ei||l.set(L,{clearProps:"transform"})),this}return L},this.wrapper=function(e){var t,r;return arguments.length?(I=(B=g(e||"#smooth-wrapper")[0]||(t=L,(r=d.querySelector(".ScrollSmoother-wrapper"))||((r=d.createElement("div")).classList.add("ScrollSmoother-wrapper"),t.parentNode.insertBefore(r,t),r.appendChild(t)),r)).getAttribute("style")||"",ep(),l.set(B,ei?{overflow:"hidden",position:"fixed",height:"100%",width:"100%",top:0,left:0,right:0,bottom:0}:{overflow:"visible",position:"relative",width:"100%",height:"auto",top:"auto",bottom:"auto",left:"auto",right:"auto"}),this):B},this.effects=function(e,t){if(O=O||[],!e)return O.slice(0);(e=g(e)).forEach(function(e){for(var t=O.length;t--;)O[t].trigger===e&&O[t].kill()});var r,n,o=(t=t||{}).speed,i=t.lag,s=t.effectsPadding,a=[];for(r=0;r<e.length;r++)(n=A(e[r],o,i,r,s))&&a.push(n);return O.push.apply(O,a),!1!==t.refresh&&m.refresh(),a},this.sections=function(e,t){if(U=U||[],!e)return U.slice(0);var r=g(e).map(function(e){return m.create({trigger:e,start:"top 120%",end:"bottom -20%",onToggle:function t(r){e.style.opacity=r.isActive?"1":"0",e.style.pointerEvents=r.isActive?"all":"none"}})});return t&&t.add?U.push.apply(U,r):U=r.slice(0),r},this.content(e.content),this.wrapper(e.wrapper),this.render=function(e){return s(e||0===e?e:ea)},this.getVelocity=function(){return ef.getVelocity(-ea)},m.scrollerProxy(B,{scrollTop:a,scrollHeight:function e(){return ep()&&h.scrollHeight},fixedMarkers:!1!==e.fixedMarkers&&!!ei,content:L,getBoundingClientRect:function e(){return{top:0,left:0,width:u.innerWidth,height:u.innerHeight}}}),m.defaults({scroller:B});var eh=m.getAll().filter(function(e){return e.scroller===u||e.scroller===B});eh.forEach(function(e){return e.revert(!0,!0)}),N=m.create({animation:l.fromTo(eu,{y:function e(){return F=0}},{y:function e(){return F=1,-ep()},immediateRender:!1,ease:"none",data:"ScrollSmoother",duration:100,onUpdate:function e(){if(F){var t=Y;t&&(o(N),eu.y=ea),s(eu.y,t),r(),J&&!D&&J(er)}}}),onRefreshInit:function e(t){if(!P.isRefreshing){if(P.isRefreshing=!0,O){var r=m.getAll().filter(function(e){return!!e.pin});O.forEach(function(e){e.vars.pinnedContainer||r.forEach(function(t){if(t.pin.contains(e.trigger)){var r=e.vars;r.pinnedContainer=t.pin,e.vars=null,e.init(r,e.animation)}})})}var n=t.getTween();q=n&&n._end>n._dp._time,W=ea,eu.y=0,ei&&(1===m.isTouch&&(B.style.position="absolute"),B.scrollTop=0,1===m.isTouch&&(B.style.position="fixed"))}},onRefresh:function e(t){t.animation.invalidate(),t.setPositions(t.start,ep()/es),q||o(t),eu.y=-eo()*es,s(eu.y),el||(q&&(Y=!1),t.animation.progress(l.utils.clamp(0,1,-(W/es/t.end)))),q&&(t.progress-=.001,t.update()),P.isRefreshing=!1},id:"ScrollSmoother",scroller:u,invalidateOnRefresh:!0,start:0,refreshPriority:-9999,end:function e(){return ep()/es},onScrubComplete:function e(){ef.reset(),Q&&Q(t)},scrub:ei||!0}),this.smooth=function(t){return arguments.length&&(es=(ei=t||0)&&+e.speed||1,N.scrubDuration(t)),N.getTween()?N.getTween().duration():0},N.getTween()&&(N.getTween().vars.ease=e.ease||_),this.scrollTrigger=N,e.effects&&this.effects(!0===e.effects?"[data-"+en+"speed], [data-"+en+"lag]":e.effects,{effectsPadding:e.effectsPadding,refresh:!1}),e.sections&&this.sections(!0===e.sections?"[data-section]":e.sections),eh.forEach(function(e){e.vars.scroller=B,e.revert(!1,!0),e.init(e.vars,e.animation)}),this.paused=function(e,t){return arguments.length?(!!D!==e&&(e?(N.getTween()&&N.getTween().pause(),eo(-ea/es),ef.reset(),(M=m.normalizeScroll())&&M.disable(),(D=m.observe({preventDefault:!0,type:"wheel,touch,scroll",debounce:!1,allowClicks:!0,onChangeY:function e(){return a(-ea)}})).nested=b(p,"wheel,touch,scroll",!0,!1!==t)):(D.nested.kill(),D.kill(),D=0,M&&M.enable(),N.progress=(-ea/es-N.start)/(N.end-N.start),o(N))),this):!!D},this.kill=this.revert=function(){t.paused(!1),o(N),N.kill();for(var e=(O||[]).concat(U||[]),r=e.length;r--;)e[r].kill();m.scrollerProxy(B),m.removeEventListener("killAll",C),m.removeEventListener("refresh",T),B.style.cssText=I,L.style.cssText=V;var n=m.defaults({});n&&n.scroller===B&&m.defaults({scroller:u}),t.normalizer&&m.normalizeScroll(!1),clearInterval(j),v=null,ed&&ed.disconnect(),h.style.removeProperty("height"),u.removeEventListener("focusin",c)},this.refresh=function(e,t){return N.refresh(e,t)},ee&&(this.normalizer=m.normalizeScroll(!0===ee?{debounce:!0,content:!ei&&L}:ee)),m.config(e),"overscrollBehavior"in u.getComputedStyle(h)&&l.set([h,p],{overscrollBehavior:"none"}),"scrollBehavior"in u.getComputedStyle(h)&&l.set([h,p],{scrollBehavior:"auto"}),u.addEventListener("focusin",c),j=setInterval(r,250),"loading"===d.readyState||requestAnimationFrame(function(){return m.refresh()})}E.version="3.12.5",E.create=function(e){return v&&e&&v.content()===g(e.content)[0]?v:new E(e)},E.get=function(){return v},n()&&l.registerPlugin(E),e.ScrollSmoother=E,e.default=E,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default});
